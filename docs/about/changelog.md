# 更新日志

## 版本说明

DataEase 版本号命名规则为：v大版本.功能版本.Bug修复版本

!!! info "例如"
    v1.0.1 是 v1.0.0 之后的Bug修复版本
    v1.1.0 是 v1.0.0 之后的功能版本

像其它优秀开源项目一样，DataEase 将每月发布一个功能版本



## v1.2.0

------

2021年09月02日

!!! info "新增功能"

- feat(仪表板): 支持仪表板联动
- feat(仪表板): 公共链接分享增加短链接
- feat(仪表板): 增加组件的悬浮工具入口
- feat(仪表板): 文本列表组件增加滚动条
- feat(仪表板): 文字组件增加透视功能
- feat(视图): 增加中国地图支持
- feat(视图): 支持视图上卷下钻
- feat(视图): 支持散点图、气泡图
- feat(视图): 支持矩形树图
- feat(视图): 视图支持简单颜色修改
- feat(数据集): 数据集字段支持公式运算等操作
- feat(数据集): 支持excel多sheet页
- feat(数据集): 支持字段编辑
- feat(数据源): 支持 SQL Server
- feat(数据源): 支持 Postgresql
- feat(数据源): 数据源高级参数设置
- feat(数据源): 定时检测数据源状态信息
- feat(数据源): 允许修改数据源
- feat(系统管理): 增加根据角色/组织进行查询的支持

!!! info "功能优化"

- feat: 完善全局token
- perf: rest请求优化为json文件请求
- perf(仪表板): 地图坐标json使用缓存
- refactor(仪表板): 仪表板预览模式下鼠标悬浮阴影效果
- refactor(仪表板): 组件预览入口修改为悬浮蓝色悬浮框展示
- refactor(仪表板): 预览界面点击组件显示设置入口，点击空白也取消设置入口；去掉原有鼠标移入显示的样式
- refactor(仪表板): 明细弹出样式修改
- refactor(仪表板): 更换仪表板视图设置组件
- refactor(仪表板): 仪表板联动设置按钮样式调整
- refactor(仪表板): 增加视图联动相关表结构等
- refactor(仪表板): 仪表板联动目标视图获取方式优化
- refactor(仪表板): 优化联动设置
- refactor(仪表板): 优化仪表板多视图同时联动效果
- refactor(仪表板): 图片修改为自适应，不保持宽高比例
- refacotr(仪表板): 仪表板联动下钻等，无需重新加载视图
- refactor(仪表板): 优化仪表板元素拖动，大小变动延迟渲染，移动使用原始Dom，优化拖动卡顿现象
- refactor(仪表板): 联动设置出现未匹配的字段时，给提示
- refactor(仪表板): 优化页面查询速度
- refactor(仪表板): 仪表板编辑时，文字组件、矩形组件、过滤组件样式设置面板强制在画布区域内
- refactor(仪表板): 增加demo
- refactor(视图): scatter优化
- refactor(视图): 视图返回参数构建
- refactor(视图): 堆叠图优化
- refactor(视图): 堆叠项不允许指标拖入
- refactor(视图): 重构仪表板主题设置组件，适配视图样式设置相关变化
- refactor(视图): 维度指标色彩区分
- refactor(视图): 坐标轴强制显示最小值
- refactor(视图): 坐标轴强制显示最大值，scatter横轴优化
- refactor(视图): 视图拖拽项样式优化


!!! info "问题修复"

- fix: sql注入和xss攻击
- fix: 过滤器多条件异常问题；编辑数据集切换到添加数据集界面异常问题
- fix: 数据集消息获取接受人权限错误
- fix: 外部链接token存储使用vuex不实用cookie
- fix: 外部链接带密码嵌在iframe
- fix: 解析excel失败
- fix: axios异步执行导致地图切换错误
- fix: 文本列表组件快速检索无效
- fix: 定时查询未读消息条数错误
- fix: 仪表板数字范围组件样式错误
- fix: 表格和视图类型圆角无效
- fix: 数据源高级设置不能编辑
- fix: 顶级地名错误
- fix: 颜色选择器去掉清空
- fix: 矩形树图标签修复
- fix: doris 计算字段支持小数
- fix: 数据集重命名
- fix: 数据集移动


## v1.1.1

------

2021年08月27日

!!! info "问题修复"

- fix: 抽取 Oracle 数据
- fix: 解析 Excel 报错
- fix: 数据集消息获取接收人权限错误
- fix: 外部链接 Token 存储使用 Vue 不使用 Cookie
- fix: 外部链接带密码嵌在 iframe
- fix: Excel 识别日期类型
- fix: Doris 时间类型长度



## v1.1.0

------

2021年08月05日

!!! info "新增功能"

- feat(系统管理): 支持消息中心
- feat(系统管理): 支持定时任务中心
- feat(系统管理): 组织管理增加可拖拽移动功能
- feat(数据源): 支持oracle
- feat(数据集): 数据集编辑字段，增加维度指标选项，而非老版本中通过字段类型判定
- feat(数据集): 数据集任务，增加简单重复执行的功能
- feat(数据集): 追加/更新 excel 数据集时，列名与原数据集保持一致
- feat(数据集): excel上传后可编辑字段类型再保存
- feat(数据集): 同数据源直连数据集之间支持数据关联
- feat(数据集): SAX 解析 excel
- feat(视图): 视图表格组件，表头表格支持行高修改
- feat(视图): 增加抽取模式视图后台缓存
- feat(视图): 轴线支持线条和标签设置
- feat(视图): 视图标题增加字体样式
- feat(视图): 视图支持更换数据集
- feat(视图): 视图支持重命名
- feat(视图): 视图横、纵轴字体增加选项
- feat(视图): 视图选择数据集tree增加搜索
- feat(视图): 视图坐标轴设置增加属性设置
- feat(视图): 饼图标签增加引导线设置
- feat(视图): radar支持轴线样式设置
- feat(视图): 视图维度指标增加快速搜索；视图界面可以编辑数据集字段
- feat(视图): 视图颜色增加多种配色方案
- feat(视图): 视图过滤重新设计，支持单维度指标展示
- feat(仪表板): 仪表板编辑时可以进行视图的复制，复制后的视图样式等改变不影响原有视图
- feat(仪表板): 仪表板增加富文本编辑
- feat(仪表板): 仪表板矩形组件编辑样式修改为悬浮式设计，设计框可以根据矩形组件移动
- feat(仪表板): 仪表板增加矩形组件风格选项 
- feat(仪表板): 文件组件拖拽时样式编辑改为悬浮式设计，在编辑仪表板时可以看到实时的效果
- feat(仪表板): 仪表板编辑增加新建视图功能，可以直接在仪表板新建视图
- feat(仪表板): 可支持查看仪表盘中图表的明细数据，在查看窗口可下载明细数据
- feat(仪表板): 仪表板条件过滤组件增加标题
- feat(仪表板): 新增外部标题组件
- feat(仪表板): 增加过滤组件标题样式设置

!!! info "功能优化"

- refactor(数据集): 数据关联选择数据集tree优化
- refactor(数据集): 数据集视图底层sql拼接使用stg重构(mysql部分)
- feat(数据集): 同步数据集预览数据从doris中取
- feat(数据集): 添加非直连数据集時，默认全量同步一次
- feat(数据集): 根据预览的前100行推断excel类型
- feat(数据集): 数据关联改为左连接等方式
- refactor(视图): 视图缓存增加互斥锁，避免出现缓存击穿现象
- refactor(视图): 视图过滤优化
- refactor(视图): 视图UI布局调整
- refactor(视图): 过滤组件条件调整
- refactor(视图): 视图过滤增加包含与不包含
- refactor(视图): 视图坐标轴标签角度设置位置调整
- refactor(视图): 视图tree增加分组默认展开；数据集数据预览接口请求时间延长
- refactor(视图): 视图分组tree优化
- refactor(视图): 视图表格组件行高优化
- refactor(仪表板): 仪表板设计时的矩阵大小调整
- refactor(仪表板): 变更仪表板新建矩形组件默认参数
- refactor(仪表板): 矩阵设计模式下点击一次组件也不需保存镜像
- refactor(仪表板): 创建分组或者仪表板时，点击取消按钮，不发出目录树的请求
- refactor(仪表板): 仪表板编辑不再使用右键操作，统一在组件右上角添加设置入口
- refactor(仪表板): 查看分享链接使用独立拦截器
- refactor(仪表板): 新增示例仪表板
- refactor(仪表板): 优化视图明细导出，导出excel中不需要合计
- refactor(仪表板): 仪表板自适应模式下，去掉滚动条
- refactor: 前端接口调整
- refactor: SQL拼接
- refactor: 前端tree组件以及拉宽线优化
- refactor: 延长模板相关api超时时间
- refactor: 优化任务日志查询
- refactor: 优化token过期提示框
- refactor: 可配置kettle 相关的文件是否保留
- refactor: tree编辑后右侧界面保持原状态
- refactor: 优化任务状态的切换

!!! info "问题修复"

- fix: 内网环境请求远程axios.js报错
- fix: axios线上build后导致弹框
- fix: 修复部分开发环境仪表板编辑无法拖拽问题
- fix: 删除数据源时，同时释放掉连接池
- fix: 修复文本悬浮样式组件样式穿透未生效问题
- fix: 识别 excel 列数
- fix: 视图表格组件高度自适应
- fix: 修复组件查询条件无效
- fix: 矩形组件和文本组件在非自适应画布区域的模式下对应悬浮组件定位问题
- fix: 处理kettle tinyint 识别错误的问题
- fix: 修复仪表板图表明细数据下载数值为0不显示问题
- fix: 组织名称验重
- fix: 中文输入法回车键直接保存
- fix: 仪表板保存直接退出问题
- fix: 保存模板部分浏览器出现堆栈超出的情况，降低一下截图图片质量
- fix: 数据集字段浮点转整型
- fix: 数据集编辑后空白
- fix: 仪表板全屏预览过滤组件下拉框不显示问题
- fix: 过滤组件弹框样式错位
- fix: tree搜索后无法折叠
- fix: 仪表板Mac M1版电脑保存模板时失败的问题
- fix: 单指标图表可能下标越界
- fix: 修复编辑过滤组件时，悬浮组件依然在遮罩上方
- fix: 编辑字段全不选后弹框报错
- fix: 同一张图片无法连续两次被导入到仪表盘
- fix: 在编辑仪表板时，复制堆叠柱状图时出错
- fix: 全屏预览模式下日期控件下拉不显示问题
- fix: 预览模式下部分尺寸的显示屏仪表板抖动问题
- fix: 过滤组件弹框回显问题
- fix: 数据集切换页面权限问题
- fix: 过滤器多条件问题
- fix: 视图编辑字段问题
- fix: 编辑数据集页面切换添加数据集页面异常问题
- fix: 日期组件选择值改变时允许保存
- fix: 判断 excel 第一行不为空并且不能有空单元格
- fix: 新建视图后权限问题
- fix: 数据集从编辑切换至添加界面的显示问题
- fix: 关闭仪表板编辑界面时清空画布缓存，修复过滤组件回显问题
- fix: 修复抽取 oracle 数据
- fix: 设置用户名称长度限制
- fix: 订不订阅总是能接收到"默认消息"
- fix: 修复 excel 替换/追加
- fix: 视图兼容过滤
- fix: 视图按钮权限控制，同步在仪表板编辑时也适用
- fix: 头部消息数字错位
- fix: 自定义数据集关联问题
- fix: 底层sql逻辑
- fix: 任务跳转
- fix: 任务列表上次执行时间与执行记录执行时间不一致
- fix: 去掉数据库创建函数 root 用户限制
- fix: 定时任务页面 loading 效果
- fix: 修复普通用户创建视图权限查不到的问题
- fix: 消息跳转到无权限路由，显示空白
- fix: 任务管理增加权限-> 用户只能管理拥有[管理权限]的数据集的任务
- fix: 用户信息长度限制
- fix: 仪表板名称限制在50字符内
- fix: 标记已读未记录查看时间
- fix: 识别 excel 类型
- fix: 仪表板编辑视图样式回显问题
- fix: 任务结束后，不允许编辑
- fix: doris类型转换
- fix: 处理 excel 公式错误
- fix: 雷达图tooltip
- fix: 资源权限逻辑错误
- fix: 执行完任务后删除文件
- fix: 关联字段数据集及时刷新
- fix: 校验增量更新sql
- fix: 视图维度指标显示错误
- fix: 更新任务状态
- fix: 公共链接分享未启用密码保护出现空白页面

## v1.0.2

------

2021年07月20日

!!! info "功能优化"

- refactor: 重构安装脚本，增加配置文件支持

!!! info "问题修复"

- fix: 修复左侧tree搜索后点击展开一直loading
- fix: 视图过滤条件非空限制
- fix: 视图标签tooltip提示内容修复
- fix: 处理kettle tinyint 识别错误的问题
- fix: 仪表板全屏预览过滤组件下拉框不显示问题
- fix: 抽取数据的错误信息调整


## v1.0.1

------

2021年07月03日

!!! info "功能优化"

- refactor: 视图表格组件，渲染速度优化

!!! info "问题修复"

- fix: 删除数据源时，同时释放掉连接池
- fix: 识别 excel 列数
- fix: 修复部分开发环境仪表板编辑无法拖拽问题
- fix: Excel支持公式
- fix: 在制作视图时，指标中排序和过滤同时使用，排序会失效
- fix: 编辑 SQL 数据集时禁止修改连接方式
- fix: 自定义 SQL 中出现 count(*) 等函数导致数据查询异常
- fix: doris查询、排序、过滤冲突 SQL 修复
- fix: 表格查询组件对繁体国际化的支持
- fix: 修复 plugin SDK pom 依赖
- fix: kettle 状态检测不准确

## v1.0.0

------

2021年06月28日

!!! info "功能列表"

<table>
	<tr>
		<td bgcolor="#3779d9" align="middle" style="font-weight:bold;color: white;width: 150px">
			功能模块
		</td>
		<td bgcolor="#3779d9" align="middle" style="font-weight:bold;color: white;width: 170px">
			功能
		</td>
		<td bgcolor="#3779d9" align="middle" style="font-weight:bold;color: white;width: 750px">
			功能描述
		</td>
	</tr>
	<tr>
		<td rowspan="12">
			仪表板
		</td>
		<td rowspan="10">
			仪表板管理
		</td>
		<td>
			在线编辑仪表板
		</td>
	</tr>
	<tr>
		<td>
			仪表板展示内容支持视图/时间组件/文本组件/数字组件/样式组件等
		</td>
	</tr>
	<tr>
		<td>
			支持视图及组件样式的设置
		</td>
	</tr>
	<tr>
		<td>
			支持仪表板主题
		</td>
	</tr>
	<tr>
		<td>
			支持仪表板的全屏预览
		</td>
	</tr>
	<tr>
		<td>
			支持仪表板模板的导出
		</td>
	</tr>
	<tr>
		<td>
			以树状形式展示仪表板分组
		</td>
	</tr>
	<tr>
		<td>
			支持仪表板分组的拖拽排序
		</td>
	</tr>
	<tr>
		<td>
			支持默认仪表板的设置
		</td>
	</tr>
	<tr>
		<td>
			支持仪表板的收藏
		</td>
	</tr>
	<tr>
		<td rowspan="2">
			仪表板分享
		</td>
		<td>
			支持按组织/角色/用户分享
		</td>
	</tr>
	<tr>
		<td>
			支持生成外部可访问的带密码保护的分享链接
		</td>
	</tr>
	<tr>
		<td rowspan="9">
			视图
		</td>
		<td rowspan="9">
			视图管理
		</td>
		<td>
			在线编辑视图
		</td>
	</tr>
	<tr>
		<td>
			支持可视化拖拽进行视图操作
		</td>
	</tr>
	<tr>
		<td>
			支持明细表/指标卡/基础柱状图/堆叠柱状图/横向柱状图/横向堆叠柱状图/基础折线图/堆叠折线图/饼图/南丁格尔玫瑰图/漏斗图/雷达图/仪表盘等多种图表类型
		</td>
	</tr>
	<tr>
		<td>
			支持维度/指标的排序展示
		</td>
	</tr>
	<tr>
		<td>
			支持指标的多种汇总计算方式
		</td>
	</tr>
	<tr>
		<td>
			支持对图表类型的图形属性进行设置
		</td>
	</tr>
	<tr>
		<td>
			支持对图表类型的组件样式进行设置
		</td>
	</tr>
	<tr>
		<td>
			支持过滤条件筛选视图展示的数据
		</td>
	</tr>
	<tr>
		<td>
			支持下载视图图片
		</td>
	</tr>
	<tr>
		<td rowspan="8">
			数据集
		</td>
		<td rowspan="8">
			数据集管理
		</td>
		<td>
			支持数据库数据集/SQL 数据集/Excel 数据集/自定义数据集等多种类型的数据集
		</td>
	</tr>
	<tr>
		<td>
			数据库数据集和 SQL 数据集支持直连和定时同步两种连接方式
		</td>
	</tr>
	<tr>
		<td>
			定时同步类型数据集支持全量更新和增量更新两种方式
		</td>
	</tr>
	<tr>
		<td>
			支持定时更新的频率控制
		</td>
	</tr>
	<tr>
		<td>
			支持定时更新任务的查看
		</td>
	</tr>
	<tr>
		<td>
			支持对数据集的字段类型/字段名/展示字段进行设置
		</td>
	</tr>
	<tr>
		<td>
			支持创建不同类型数据集与数据集之间的关联
		</td>
	</tr>
	<tr>
		<td>
			支持 Excel 数据集数据的替换和更新
		</td>
	</tr>
	<tr>
		<td rowspan="2">
			数据源
		</td>
		<td rowspan="2">
			数据源管理
		</td>
		<td>
			支持 MySQL 数据源
		</td>
	</tr>
	<tr>
		<td>
			支持对数据源有效性校验
		</td>
	</tr>
</table>